window.wpfb_form_recatptcha_widgets=[],function($){"use strict";$(document).ready((function(){$("[data-auto-open].wpfb-form-popup").each((function(){var e,a,t=$(this),r=t.attr("id"),o=t.data("open-delay"),i=t.data("auto-close"),n=t.data("close-delay"),d=t.data("one-time");clearTimeout(e),clearTimeout(a),e=setTimeout((function(){clearTimeout(a),d?$.cookie(r)||($(".wpfb-form-pop-overlay").show(),$("body").addClass("wpfb-form-opening"),t.show(),$.cookie(r,1,{expires:3600,path:"/"})):($.cookie(r,0,{expires:-1}),$(".wpfb-form-pop-overlay").show(),t.show())}),o),i&&(a=setTimeout((function(){clearTimeout(e),$(".wpfb-form-pop-overlay").hide(),$("body").addClass("wpfb-form-opening"),t.hide()}),n))})),$(document).on("click",'[data-toggle="wpfbformpopup"],[rel="wpfbformpopup"],[href^="#wpfbformpopup-"]',(function(e){var a;e.stopPropagation(),e.preventDefault();var t=$(this),r=$(t.attr("data-target")||(a=t.attr("href"))&&a.replace(/.*(?=#[^\s]+$)/,""));t.is("a")&&e.preventDefault(),$(".wpfb-form-pop-overlay").show(),$("body").addClass("wpfb-form-opening"),r.show(),r.off("click").on("click",(function(e){e.target===e.currentTarget&&($(".wpfb-form-pop-overlay").hide(),$("body").removeClass("wpfb-form-opening"),r.hide())}))})),$(document).on("click",".wpfb-form-popup-close",(function(e){$(".wpfb-form-pop-overlay").hide(),$("body").removeClass("wpfb-form-opening"),$(this).closest(".wpfb-form-popup").hide()})),$(".wpfb-form-slider-control").each((function(){var e=$(this);e.slider({min:e.data("min"),max:e.data("max"),step:e.data("step"),range:"range"==e.data("type")||"min",slide:function(a,t){"range"==e.data("type")?(e.closest(".wpfb-form-group").find(".wpfb-form-slider-value-from").text(t.values[0]),e.closest(".wpfb-form-group").find(".wpfb-form-slider-value-to").text(t.values[1]),e.closest(".wpfb-form-group").find('input[type="hidden"]').val(t.values[0]+"-"+t.values[1]).trigger("change")):(e.closest(".wpfb-form-group").find(".wpfb-form-slider-value").text(t.value),e.closest(".wpfb-form-group").find('input[type="hidden"]').val(t.value).trigger("change"))}}),"range"==e.data("type")?e.slider("values",[0,e.data("minmax")]):e.slider("value",e.data("value"))}));var basename=function(e,a){var t=e,r=t.charAt(t.length-1);return"/"!==r&&"\\"!==r||(t=t.slice(0,-1)),t=t.replace(/^.*[\/\\]/g,""),"string"==typeof a&&t.substr(t.length-a.length)==a&&(t=t.substr(0,t.length-a.length)),t},operators={">":function(e,a){return e>a},"=":function(e,a){return e==a},"<":function(e,a){return e<a}},get_field_val=function(e,a){var t=$(a),r=$(e);return r.is(":checkbox")?$.map(t.find("[data-conditional-name="+r.data("conditional-name")+"].wpfb-form-value:checked"),(function(e){return $(e).val()})):r.is(":radio")?t.find("[data-conditional-name="+r.data("conditional-name")+"].wpfb-form-value:checked").val():r.val()},conditional_hook=function(e){var a,t=$(e.currentTarget),r=t.closest("form"),o=wpfb_form_params.container_class,i=t.closest(o),n=t.data("conditional"),d=[],s=null;return a=get_field_val(t,r),(t.is(":checkbox")?!r.find("[data-conditional-name="+t.data("conditional-name")+"].wpfb-form-value:checked").length:t.is(":radio")?!r.find("[data-conditional-name="+t.data("conditional-name")+"].wpfb-form-value:checked").val():!a.length)?($.each(n,(function(e,a){var t=a.element.split(",");$.each(t,(function(e,a){var t=r.find(".wpfb-form-control-"+a);t.closest(o).addClass("wpfb-form-hidden"),t.trigger("change")}))})),$.each(n,(function(e,a){var t=a.element.split(",");"is_empty"==a.type&&("hide"==a.action?$.each(t,(function(e,a){var t=r.find(".wpfb-form-control-"+a);t.closest(o).addClass("wpfb-form-hidden"),t.trigger("change")})):$.each(t,(function(e,a){var t=r.find(".wpfb-form-control-"+a);t.closest(o).removeClass("wpfb-form-hidden"),t.trigger("change")})))}))):($.isNumeric(a)&&(a=parseInt(a)),$.each(n,(function(e,t){t.value==a?s=t:d.push(t)})),null!=s&&(d.push(s),n=d),$.each(n,(function(e,t){var n=t.element.split(",");i.hasClass("wpfb-form-hidden")?$.each(n,(function(e,a){var t=r.find(".wpfb-form-control-"+a);t.closest(o).addClass("wpfb-form-hidden"),t.trigger("change")})):"not_empty"==t.type?"hide"==t.action?$.each(n,(function(e,a){var t=r.find(".wpfb-form-control-"+a);t.closest(o).addClass("wpfb-form-hidden"),t.trigger("change")})):$.each(n,(function(e,a){var t=r.find(".wpfb-form-control-"+a);t.closest(o).removeClass("wpfb-form-hidden"),t.trigger("change")})):"is_empty"==t.type?"hide"==t.action?$.each(n,(function(e,a){var t=r.find(".wpfb-form-control-"+a);t.closest(o).removeClass("wpfb-form-hidden"),t.trigger("change")})):$.each(n,(function(e,a){var t=r.find(".wpfb-form-control-"+a);t.closest(o).addClass("wpfb-form-hidden"),t.trigger("change")})):$.isArray(a)?$.inArray(t.value,a)>-1?"hide"==t.action?$.each(n,(function(e,a){var t=r.find(".wpfb-form-control-"+a);t.closest(o).addClass("wpfb-form-hidden"),t.trigger("change")})):$.each(n,(function(e,a){var t=r.find(".wpfb-form-control-"+a);t.closest(o).removeClass("wpfb-form-hidden"),t.trigger("change")})):"hide"==t.action?$.each(n,(function(e,a){var t=r.find(".wpfb-form-control-"+a);t.closest(o).removeClass("wpfb-form-hidden"),t.trigger("change")})):$.each(n,(function(e,a){var t=r.find(".wpfb-form-control-"+a);t.closest(o).addClass("wpfb-form-hidden"),t.trigger("change")})):($.isNumeric(a)&&(a=parseInt(a)),$.isNumeric(t.value)&&"0"!=t.value&&(t.value=parseInt(t.value)),"not_empty"!=t.type&&"is_empty"!=t.type&&operators[t.type](a,t.value)?"hide"==t.action?$.each(n,(function(e,a){var t=r.find(".wpfb-form-control-"+a);t.closest(o).addClass("wpfb-form-hidden"),t.trigger("change")})):$.each(n,(function(e,a){var t=r.find(".wpfb-form-control-"+a);t.closest(o).removeClass("wpfb-form-hidden"),t.trigger("change")})):"hide"==t.action?$.each(n,(function(e,a){var t=r.find(".wpfb-form-control-"+a);t.closest(o).removeClass("wpfb-form-hidden"),t.trigger("change")})):$.each(n,(function(e,a){var t=r.find(".wpfb-form-control-"+a);t.closest(o).addClass("wpfb-form-hidden"),t.trigger("change")})))}))),!0},update_hidden_fields=function(e){var a=$(e),t=[];a.find(".wpfb-form-value").filter((function(){var e=$(this).attr("data-name")||this.name;return!($.inArray(e,t)>=0||$(this).is(":visible"))&&(t.push(e),!0)})),a.find("#_wpfb_form_hidden_fields").val(JSON.stringify(t))},conditional_form=function(e,a){var t=$(e).find(".wpfb-form-conditional");a=a||!1;"yes"!==wpfb_form_params.is_preview_mode&&$.each(t,(function(){var e=$(this).find("[data-conditional].wpfb-form-value");!1===a&&$(e).on("keyup change",(function(e){conditional_hook(e)})),$.each(e,(function(){var e=$(this);conditional_hook({currentTarget:e})}))}))},form_price_format=function(e,a){var t=$(e),r=(t.data("currency"),t.data("currency_symbol"));return t.data("price_format").replace("%s",r).replace("%v",a)},field_calculation=function(form){var $form=$(form),maths=[];$("[data-field_calculation]",$form).each((function(){var match,match_value=0,$this=$(this),pattern=/\[(.*?)\]/g,operators=$this.data("field_calculation"),value_format=$this.data("calculation_value_format");if(!$.isNumeric(operators)){if(""===operators.replace(/[^.*()\-+\/]+/g,"")){var $el=$("[data-field-name="+operators+"]",$form),field_value=parseFloat(get_field_val($el,$form));field_value=isNaN(field_value)?0:field_value,match_value=field_value}else{var fields=operators.split(/[*()\-+\/]/);$.each(fields,(function(e,a){if(""!=a.trim()){var t=$("[data-field-name="+a+"]",$form);if(t.length){var r=parseFloat(get_field_val(t,$form));r=isNaN(r)?0:r;var o=new RegExp(a,"g");operators=operators.replace(o,r)}}}));try{match_value=parseFloat(eval(operators).toFixed(2))}catch(e){match_value=0}}match_value=value_format.replace("%v",match_value),$this.hasClass("wpfb-form-control-label")?$this.html(match_value):$this.val(match_value).prop("value",match_value),$(document.body).trigger("wpfb_field_calculation_change",[$form])}}))},paypal_calculation=function(form){var $form=$(form),maths=[];$(".wpfb-paypal-calculation",$form).each((function(){var match,match_value=0,$this=$(this),pattern=/\[(.*?)\]/g,operators=$this.data("value-math");if(!$.isNumeric(operators)){if(""===operators.replace(/[^.*()\-+\/]+/g,"")){var $el=$("[data-field-name="+operators+"]",$form),field_value=parseFloat(get_field_val($el,$form));field_value=isNaN(field_value)?0:field_value,match_value=field_value}else{var fields=operators.split(/[*()\-+\/]/);$.each(fields,(function(e,a){if(""!=a.trim()){var t=$("[data-field-name="+a+"]",$form);if(t.length){var r=parseFloat(get_field_val(t,$form));r=isNaN(r)?0:r;var o=new RegExp(a,"g");operators=operators.replace(o,r)}}}));try{match_value=parseFloat(eval(operators).toFixed(2))}catch(e){match_value=0}}if($this.hasClass("paypal-item-price-value")){var match_value_formated=form_price_format($form,match_value);$this.html(match_value_formated),$this.data("result-math",match_value)}else $this.html(match_value),$this.data("result-math",match_value);$(document.body).trigger("wpfb_paypal_calculation_change",[$form])}}))};$(document.body).on("wpfb_paypal_calculation_change",(function(e,a){var t=0,r=$(a);$(".paypal-item-price-value",r).each((function(){t+=parseFloat($(this).data("result-math"))})),$(".paypal-total-value",r).html(form_price_format(r,t))}));var initRecaptcha=function(){var e=$('[data-wpfbform-recaptcha="recaptcha"]');if(e.length){var a=function(e){window.grecaptcha&&window.grecaptcha.render?e():setTimeout((function(){a(e)}),350)};a((function(){!function(e){e.each((function(){var e=this,a=$(e);if(a.hasClass("wpfb-form-recaptcha2")){var t=grecaptcha.render(e,a.data());a.closest("form"),a.data("widget_id",t),$(document.body).on("wpfb_form_submit",(function(e,t,r){switch(r.status){case"validation_failed":case"spam":case"success":case"upload_failed":case"form_not_exist":case"action_failed":case"call_action_failed":grecaptcha.reset(a.data("widget_id"))}}))}else grecaptcha.ready((function(){grecaptcha.execute(a.data("sitekey"),{action:"homepage"}).then((function(a){e.setAttribute("value",a)}))}))}))}(e)}))}};initRecaptcha(),$.fn.xdsoftDatetimepicker&&"function"==typeof $.xdsoftDatetimepicker.setLocale&&$.xdsoftDatetimepicker.setLocale(wpfb_form_params.datetimepicker_lang);var form_submit_loading=function(e,a){a=a||!1;var t=$(e),r=t.find(".wpfb-form-submit"),o=t.find(".wpfb-form-submit-label"),i=t.find(".wpfb-form-submit-spinner");a?(r.removeAttr("disabled"),o.removeClass("wpfb-form-submit-label-hidden"),i.hide()):(r.attr("disabled","disabled"),o.addClass("wpfb-form-submit-label-hidden"),i.show())};$(".wpfb-form-datepicker").length&&$(".wpfb-form-datepicker").each((function(){var e=$(this);e.xdsoftDatetimepicker({format:wpfb_form_params.date_format,formatDate:wpfb_form_params.date_format,timepicker:!1,scrollMonth:!1,dayOfWeekStart:parseInt(wpfb_form_params.dayofweekstart),scrollTime:!1,minDate:e.data("min-date"),maxDate:e.data("max-date"),yearStart:e.data("year-start"),yearEnd:e.data("year-end"),scrollInput:!1})})),$(".wpfb-form-timepicker").length&&$(".wpfb-form-timepicker").each((function(){var e=$(this);e.xdsoftDatetimepicker({format:wpfb_form_params.time_format,formatTime:wpfb_form_params.time_format,datepicker:!1,scrollMonth:!1,scrollTime:!0,scrollInput:!1,dayOfWeekStart:parseInt(wpfb_form_params.dayofweekstart),minTime:e.data("min-time"),maxTime:e.data("max-time"),yearStart:e.data("year-start"),yearEnd:e.data("year-end"),step:parseInt(wpfb_form_params.time_picker_step)})})),$(".wpfb-form-control[data-range_field]").each((function(){var e=$(this),a=e.data("range_field"),t=$('.wpfb-form-control[data-field-name="'+a+'"]');t.xdsoftDatetimepicker("setOptions",{onChangeDateTime:function(a,r,o,i){var n=new Date(a.getFullYear(),a.getMonth(),a.getDate()+parseInt(e.data("range_field_start_current")),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()).toString();if("yes"===e.data("range_field_set_value")){var d=t.data("xdsoft_datetimepicker").getDateHelper(),s=e.hasClass("wpfb-form-datetimepicker")?dhvcformL10n.date_format+" "+dhvcformL10n.time_format:dhvcformL10n.date_format,c=d.formatDate(new Date(n),s);e.val(c).attr("value",c),e.trigger("change")}e.xdsoftDatetimepicker("reset").xdsoftDatetimepicker("setOptions",{minDate:new Date(n)})}})})),$(".wpfb-form-datetimepicker").length&&$(".wpfb-form-datetimepicker").each((function(){var e=$(this);e.xdsoftDatetimepicker({format:wpfb_form_params.date_format+" "+wpfb_form_params.time_format,datepicker:!0,scrollMonth:!1,scrollTime:!0,scrollInput:!1,minTime:e.data("min-time"),maxTime:e.data("max-time"),minDate:e.data("min-date"),maxDate:e.data("max-date"),yearStart:e.data("year-start"),yearEnd:e.data("year-end"),step:parseInt(wpfb_form_params.time_picker_step)})})),$(".wpfb-form-minicolors").each((function(){$(".wpfb-form-control",$(this)).minicolors({theme:"bootstrap"})}));var initForm=function(form){var $form=$(form),submiting=!1,submitBtn=$form.find(".wpfb-form-submit");$(".wpfb-form-file",$form).find("input[type=file]").on("change",(function(){var e=$(this).val();$(this).closest("label").find(".wpfb-form-control").prop("value",basename(e))})),$(".wpfb-form-file",$form).each((function(){$(this).find('input[type="text"]').css({"padding-right":$(this).find(".wpfb-form-file-button").outerWidth(!0)+"px"}),$(this).find('input[type="text"]').on("click",(function(){$(this).closest("label").trigger("click")}))})),$.fn.tooltip&&$(".wpfb-form-rate .wpfb-form-rate-star",$form).tooltip({html:!0,container:$("body")});var clearResponse=function(e){var a=$(e);a.removeClass("invalid spam sent failed"),$("[aria-invalid]",a).attr("aria-invalid","false"),$(".wpfb-form-error",a).remove(),$(".wpfb-form-control",a).removeClass("wpfb-form-not-valid"),$(".wpfb-form-message",a.parent()).hide().empty().removeAttr("role").removeClass("wpfb-form-validation-errors wpfb-form-spam wpfb-form-errors wpfb-form-success")},refill=function(e,a){var t=$(e);a.captcha&&function(e,a){$.each(a,(function(a,t){e.find(':input[name="'+a+'"]').val(""),e.find("img.wpfb-form-captcha-img-"+a).attr("src",t);var r=/([0-9]+)\.(png|gif|jpeg)$/.exec(t);e.find('input:hidden[name="_wpfb_form_captcha_challenge_'+a+'"]').attr("value",r[1])}))}(t,a.captcha)},notValidTip=function(e,a){if(""!=a){var t=$(e);$(".wpfb-form-error",t).remove();var r=$('<span role="alert" class="wpfb-form-error"></span>');r.text(a),t.is(":radio")||t.is(":checkbox")?r.appendTo(t.parent().parent()):"recaptcha"==t.attr("data-wpfbform-recaptcha")?r.appendTo(t.closest(".wpfb-form-group")):r.appendTo(t.parent().parent())}},form_step_click_init=function(e){var a=$(e);$(".wpfb-form-step",a).on("click",(function(e){var t=$(this);if(e.stopPropagation(),e.preventDefault(),t.hasClass("actived")){$(".wpfb-form-message.wpfb-form-success",a.parent()).hide().empty().removeAttr("role").removeClass("wpfb-form-validation-errors wpfb-form-spam wpfb-form-errors wpfb-form-success");var r=parseInt($(this).data("step-index"));parseInt($("#_wpfb_form_current_step",a).val());t.siblings(".wpfb-form-step.active").removeClass("active").addClass("actived"),t.removeClass("actived").addClass("active"),$(".wpfb-form-step-content",a).removeClass("active"),$(".wpfb-form-step-content-"+r,a).addClass("active"),$("#_wpfb_form_current_step",a).val(r),$(".wpfb-form-value",a).on("input.wpfbform change.wpfbform",(function(){var e=$(this).closest(".wpfb-form-step-content").data("content_step");a.find("[data-step-index="+e+"]").nextAll().removeClass("active actived"),$("#_wpfb_form_current_step",a).val(r)}))}}))};form_step_click_init($form);var ajaxSuccess=function(data,status,xhr,$form){var $message=$(".wpfb-form-message",$form.parent());switch(data.status){case"validation_failed":var firstInvalidFields=null;$.each(data.invalid_fields,(function(e,a){firstInvalidFields||(firstInvalidFields=$(a.into)),notValidTip($(a.into),a.reason),$(".wpfb-form-control",$(a.into).closest(".wpfb-form-group")).addClass("wpfb-form-not-valid"),$("[aria-invalid]",$(a.into)).attr("aria-invalid","true")}));try{firstInvalidFields.focus().trigger("focusin")}catch(e){}$message.addClass("wpfb-form-validation-errors"),$form.addClass("invalid"),$(document.body).trigger("wpfb_form_invalid",[$form,data]);break;case"success":if($form.find("#_wpfb_form_steps").length){var step_final='<div class="wpfb-form-steps-final"></div>';$form.find(".wpfb-form-step-contents").append($(step_final))}data.onOk&&$.each(data.onOk,(function(i,n){eval(n)})),$message.addClass("wpfb-form-success"),$(document.body).trigger("wpfb_form_success",[$form,data]);break;case"spam":$message.addClass("wpfb-form-spam"),$(document.body).trigger("wpfb_form_spam",[$form,data]);break;case"upload_failed":$message.addClass("wpfb-form-errors"),$(document.body).trigger("wpfb_form_upload_failed",[$form,data]);break;case"form_not_exist":$message.addClass("wpfb-form-errors"),$(document.body).trigger("wpfb_form_not_exist",[$form,data]);break;case"action_failed":$message.addClass("wpfb-form-errors"),$(document.body).trigger("wpfb_form_action_failed",[$form,data]);break;case"call_action_failed":$message.addClass("wpfb-form-errors"),$(document.body).trigger("wpfb_form_call_action_failed",[$form,data]);break;case"next_step":var $current_step_input=$("#_wpfb_form_current_step",$form),$current_step=parseInt($current_step_input.val()),$all_steps=parseInt($("#_wpfb_form_steps",$form).val()),$next_step=$current_step+1;$next_step<=$all_steps&&($(".wpfb-form-steps",$form).find(".active").removeClass("active"),$(".wpfb-form-step-"+$current_step,$form).addClass("actived"),$(".wpfb-form-step-"+$next_step,$form).removeClass("actived").addClass("active"),$(".wpfb-form-step-content",$form).removeClass("active"),$(".wpfb-form-step-content-"+$next_step,$form).addClass("active"),$("#_wpfb_form_current_step",$form).val($next_step))}refill($form,data),$(document.body).trigger("wpfb_form_submit",[$form,data]),"success"===data.status&&($form.each((function(){this.reset()})),conditional_form($form,!0),data.refresh?window.location.reload():data.redirect&&(window.location=data.redirect)),data.redirect||""==data.message||($message.html(data.message),$message.attr("role","alert"),$form.find(".wpfb-form-steps-final").length?($(".wpfb-form-step-content").each((function(){$(this).remove()})),$form.find(".wpfb-form-steps-final").html($message.clone()),$message.remove()):$message.slideDown("fast"))};$form.submit((function(e){if("yes"!==wpfb_form_params.is_preview_mode&&!submiting&&"function"==typeof window.FormData){submiting=!0,clearResponse($form),update_hidden_fields($form);var a=new FormData($form.get(0));$.ajax({type:"POST",url:wpfb_form_params.ajax_submit_url,data:a,dataType:"json",processData:!1,contentType:!1,beforeSend:function(){$(document.body).trigger("wpfb_form_before_submit",[$form,submitBtn]),form_submit_loading($form,!1)}}).done((function(e,a,t){$(document.body).trigger("wpfb_form_after_submit",[$(form),submitBtn,e]),ajaxSuccess(e,a,t,$form),submiting=!1,form_submit_loading($form,!0)})).fail((function(e,a,t){submiting=!1,form_submit_loading($form,!0)})),e.preventDefault()}}))};$("form.wpfbform").each((function(){var e=$(this);paypal_calculation(e),field_calculation(e),$(".wpfb-form-value",e).on("keyup change",(function(e){paypal_calculation($(this).closest("form")),field_calculation($(this).closest("form"))})),conditional_form(e),e.hasClass("wpfbform-action-default")&&initForm(e)})),$(document).on("elementor/popup/show",(function(e,a){$("#elementor-popup-modal-"+a).find("form.wpfbform").each((function(){var e=$(this);paypal_calculation(e),field_calculation(e),$(".wpfb-form-value",e).on("keyup change",(function(e){paypal_calculation($(this).closest("form")),field_calculation($(this).closest("form"))})),conditional_form(e),e.hasClass("wpfbform-action-default")&&initForm(e)}))}))}))}(window.jQuery);